<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Soomario Portfolio Finder V8 - Jan 2026 UPDATE</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Cinzel:wght@700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #e0e0e0;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px;
            background: linear-gradient(135deg, #8b5cf6 0%, #d946ef 100%);
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(139, 92, 246, 0.3);
        }

        .header h1 {
            font-family: 'Cinzel', serif;
            font-size: 3em;
            color: #ffd700;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            margin-bottom: 10px;
        }

        .header .subtitle {
            font-size: 1.2em;
            color: rgba(255, 255, 255, 0.9);
        }
        
        .update-banner {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            text-align: center;
            border: 2px solid #34d399;
            box-shadow: 0 8px 25px rgba(16, 185, 129, 0.4);
        }
        
        .update-banner h2 {
            color: #fff;
            margin-bottom: 10px;
            font-size: 1.5em;
        }
        
        .update-banner p {
            color: #d1fae5;
            font-size: 1.1em;
        }

        .mode-selector {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .mode-card {
            background: rgba(30, 30, 46, 0.95);
            border: 2px solid rgba(139, 92, 246, 0.3);
            border-radius: 15px;
            padding: 30px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }

        .mode-card:hover {
            transform: translateY(-5px);
            border-color: #8b5cf6;
            box-shadow: 0 8px 25px rgba(139, 92, 246, 0.4);
        }

        .mode-card h3 {
            font-size: 1.8em;
            color: #ffd700;
            margin-bottom: 15px;
        }

        .mode-card p {
            color: #a78bfa;
            line-height: 1.6;
        }

        .card {
            background: rgba(30, 30, 46, 0.95);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(139, 92, 246, 0.2);
            display: none;
        }

        .card.show {
            display: block;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(139, 92, 246, 0.2);
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 30px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #8b5cf6 0%, #d946ef 100%);
            transition: width 0.3s;
        }

        .question {
            margin-bottom: 30px;
        }

        .question h3 {
            color: #ffd700;
            font-size: 1.4em;
            margin-bottom: 20px;
        }

        .answers {
            display: grid;
            gap: 15px;
        }

        .answer-btn {
            background: rgba(139, 92, 246, 0.1);
            border: 2px solid rgba(139, 92, 246, 0.3);
            border-radius: 12px;
            padding: 20px;
            color: #e0e0e0;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s;
            text-align: left;
        }

        .answer-btn:hover {
            background: rgba(139, 92, 246, 0.2);
            border-color: #8b5cf6;
            transform: translateX(5px);
        }

        .form-group {
            margin-bottom: 25px;
        }

        label {
            display: block;
            color: #a78bfa;
            margin-bottom: 10px;
            font-weight: 600;
        }

        select {
            width: 100%;
            padding: 15px;
            background: rgba(30, 30, 46, 0.95);
            border: 2px solid rgba(139, 92, 246, 0.3);
            border-radius: 12px;
            color: #e0e0e0;
            font-size: 1.1em;
            cursor: pointer;
        }
        
        select option {
            background: #1a1a2e;
            color: #e0e0e0;
            padding: 10px;
        }
        
        select:focus {
            outline: none;
            border-color: #8b5cf6;
            background: rgba(30, 30, 46, 1);
        }

        .btn {
            background: linear-gradient(135deg, #8b5cf6 0%, #d946ef 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.2em;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(139, 92, 246, 0.4);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(139, 92, 246, 0.6);
        }

        .btn-secondary {
            background: rgba(139, 92, 246, 0.2);
            border: 2px solid #8b5cf6;
        }

        .results {
            padding: 30px;
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.1) 0%, rgba(217, 70, 239, 0.1) 100%);
            border-radius: 15px;
            margin-bottom: 30px;
        }

        .results h2 {
            color: #ffd700;
            font-size: 2em;
            margin-bottom: 10px;
            text-align: center;
        }

        .results .tier-name {
            color: #a78bfa;
            font-size: 1.3em;
            text-align: center;
            margin-bottom: 30px;
        }

        .performance-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .metric-card {
            background: rgba(30, 30, 46, 0.8);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid rgba(139, 92, 246, 0.3);
            text-align: center;
        }

        .metric-card h4 {
            color: #a78bfa;
            font-size: 0.9em;
            margin-bottom: 10px;
        }

        .metric-card .value {
            color: #ffd700;
            font-size: 2em;
            font-weight: 700;
        }

        .allocation-table {
            width: 100%;
            margin: 30px 0;
            border-collapse: collapse;
        }

        .allocation-table th,
        .allocation-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid rgba(139, 92, 246, 0.2);
        }

        .allocation-table th {
            color: #ffd700;
            font-weight: 700;
        }

        .allocation-table td {
            color: #e0e0e0;
        }

        .badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.8em;
            font-weight: 600;
            margin-left: 10px;
        }

        .badge-crypto {
            background: rgba(139, 92, 246, 0.2);
            color: #a78bfa;
        }

        .badge-2x {
            background: rgba(239, 68, 68, 0.2);
            color: #f87171;
        }

        .badge-stock {
            background: rgba(59, 130, 246, 0.2);
            color: #60a5fa;
        }

        .badge-etf {
            background: rgba(16, 185, 129, 0.2);
            color: #34d399;
        }
        
        .badge-warning {
            background: rgba(245, 158, 11, 0.2);
            color: #fbbf24;
        }
        
        .toggle-container {
            margin: 25px 0;
            padding: 20px;
            background: rgba(139, 92, 246, 0.1);
            border: 2px solid rgba(139, 92, 246, 0.3);
            border-radius: 12px;
        }
        
        .toggle-group {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 30px;
        }
        
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(139, 92, 246, 0.3);
            transition: .4s;
            border-radius: 30px;
        }
        
        .slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .slider {
            background-color: #8b5cf6;
        }
        
        input:checked + .slider:before {
            transform: translateX(30px);
        }
        
        .leverage-label {
            color: #a78bfa;
            font-size: 1.1em;
            font-weight: 600;
        }
        
        .warning-box {
            background: rgba(245, 158, 11, 0.2);
            border: 2px solid #f59e0b;
            border-radius: 12px;
            padding: 15px;
            margin-top: 15px;
        }
        
        .warning-box h4 {
            color: #fbbf24;
            margin-bottom: 8px;
        }
        
        .warning-box p {
            color: #fcd34d;
        }

        .explanation {
            background: rgba(139, 92, 246, 0.1);
            border-left: 4px solid #8b5cf6;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
        }

        .explanation h3 {
            color: #ffd700;
            margin-bottom: 10px;
        }

        .explanation p {
            color: #c4b5fd;
            line-height: 1.8;
        }

        @media (max-width: 768px) {
            .mode-selector {
                grid-template-columns: 1fr;
            }

            .header h1 {
                font-size: 2em;
            }

            .performance-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>‚ö° SOOMARIO V8 ‚ö°</h1>
            <p class="subtitle">Find Your Perfect Trading Bot Portfolio</p>
        </div>

        <div class="update-banner">
            <h2>üöÄ JANUARY 2026 UPDATE!</h2>
            <p>NEW: w/ Short strategies added | PUMP bots live | SLV performance updated | Higher returns across the board!</p>
        </div>

        <!-- Mode Selection Screen -->
        <div id="modeSelection" class="card show">
            <h2 style="color: #ffd700; text-align: center; margin-bottom: 30px; font-size: 2em;">Choose Your Path</h2>
            <div class="mode-selector">
                <div class="mode-card" onclick="startQuiz()">
                    <h3>üéØ Quiz Mode</h3>
                    <p>Answer 5-6 quick questions and let me recommend the perfect portfolio for your risk tolerance and goals.</p>
                    <p style="margin-top: 15px; color: #ffd700;">‚è±Ô∏è Takes 30 seconds</p>
                </div>
                <div class="mode-card" onclick="showManualMode()">
                    <h3>‚öôÔ∏è Manual Mode</h3>
                    <p>Choose your tier and strategy yourself if you already know what you want. Full control.</p>
                    <p style="margin-top: 15px; color: #ffd700;">üéÆ For experienced users</p>
                </div>
            </div>
        </div>

        <!-- Quiz Mode -->
        <div id="quizMode" class="card">
            <div class="progress-bar">
                <div class="progress-fill" id="progressBar"></div>
            </div>
            <div id="quizContent"></div>
        </div>

        <!-- Manual Mode -->
        <div id="manualMode" class="card">
            <h2 style="color: #ffd700; margin-bottom: 30px;">Manual Portfolio Calculator</h2>
            
            <div class="form-group">
                <label for="tierSelect">Select Tier:</label>
                <select id="tierSelect" onchange="updateVariants()">
                    <option value="">Choose a tier...</option>
                    <option value="STARTER">STARTER ($60/mo) - 1 Bot</option>
                    <option value="DUO">DUO ($119/mo) - 2 Bots</option>
                    <option value="TRIO">TRIO ($149/mo) - 3 Bots</option>
                    <option value="QUAD">QUAD ($189/mo) - 4 Bots</option>
                    <option value="GOD">GOD MODE ($219/mo) - 5 Bots</option>
                    <option value="ELITE">ELITE üèÜ (Custom) - Championship Portfolios</option>
                </select>
            </div>

            <div class="form-group" id="variantGroup" style="display:none;">
                <label for="variantSelect">Select Strategy:</label>
                <select id="variantSelect">
                </select>
            </div>
            
            <div class="toggle-container">
                <label style="color: #a78bfa; font-weight: 600; display: block; margin-bottom: 10px;">Enable 2x Leverage?</label>
                <div class="toggle-group">
                    <label class="toggle-switch">
                        <input type="checkbox" id="leverageToggle" onchange="toggleLeverage()">
                        <span class="slider"></span>
                    </label>
                    <span class="leverage-label" id="leverageLabel">Off</span>
                </div>
                
                <div class="warning-box" id="leverageWarning" style="display: none;">
                    <h4>‚ö†Ô∏è 2x Leverage Active</h4>
                    <p>Higher returns, but 2x the drawdown. Only use if you can handle volatility!</p>
                </div>
            </div>

            <button class="btn" onclick="calculateManual()">Calculate Portfolio</button>
            <button class="btn btn-secondary" onclick="backToMenu()" style="margin-left: 15px;">Back to Menu</button>
        </div>

        <!-- Results -->
        <div id="results" class="card">
            <!-- Results will be dynamically inserted here -->
        </div>
    </div>

    <script>
        // UPDATED BOT DATA - January 2026
        const botData = {
            // HYPE Strategies
            'HYPE_W_SHORT': { name: 'HYPE w/ Short', annual: 578, dd: -16.21, winRate: 88.0, pf: 3.69, years: 0.85, badge: 'CRYPTO', rdd: 35.63 },
            'HYPE_LONG': { name: 'HYPE Long Only', annual: 241, dd: -16.45, winRate: 84.21, pf: 4.66, years: 0.84, badge: 'CRYPTO', rdd: 14.63 },
            'HYPE_MAX_PAIN': { name: 'HYPE Max-Pain', annual: 173, dd: -17.05, winRate: 94.87, pf: 175.34, years: 0.90, badge: 'CRYPTO', rdd: 10.14 },
            
            // LTC Strategies
            'LTC_W_SHORT': { name: 'LTC w/ Short', annual: 152, dd: -13.78, winRate: 75.93, pf: 4.13, years: 2.86, badge: 'CRYPTO', rdd: 11.04 },
            'LTC_W_SHORT_2X': { name: 'LTC w/ Short @ 2x', annual: 304, dd: -27.56, winRate: 75.93, pf: 4.13, years: 2.86, badge: '2X', rdd: 11.04 },
            
            // CRV Strategies
            'CRV_W_SHORT': { name: 'CRV w/ Short NEW', annual: 217, dd: -47.21, winRate: 76.33, pf: 1.69, years: 2.85, badge: 'CRYPTO', rdd: 4.60 },
            
            // PUMP Strategies
            'PUMP_W_SHORT': { name: 'PUMP w/ Short ‚ö†Ô∏è', annual: 15039, dd: -35.20, winRate: 86.27, pf: 2.04, years: 0.49, badge: 'WARNING', rdd: 427.25, warning: 'SHORT BACKTEST - Only 6 months proven. Use cautiously at 10-20% max.' },
            'PUMP_MAX_PAIN': { name: 'PUMP Max-Pain ‚ö†Ô∏è', annual: 904, dd: -6.96, winRate: 92.0, pf: 14.43, years: 0.46, badge: 'WARNING', rdd: 129.87, warning: 'SHORT BACKTEST - Only 6 months proven. Amazing DD but limited data.' },
            'PUMP_LONG': { name: 'PUMP Long Only', annual: 979, dd: -42.40, winRate: 81.52, pf: 1.41, years: 0.49, badge: 'CRYPTO', rdd: 23.09 },
            
            // SOL & SUI Max-Pain
            'SOL_MAX_PAIN': { name: 'SOL Max-Pain', annual: 150, dd: -14.84, winRate: 82.07, pf: 2.60, years: 1.13, badge: 'CRYPTO', rdd: 10.13 },
            'SUI_MAX_PAIN': { name: 'SUI Max-Pain', annual: 176, dd: -18.18, winRate: 88.64, pf: 28.77, years: 1.92, badge: 'CRYPTO', rdd: 9.71 },
            
            // Stock/ETF - UPDATED SLV!
            'SLV': { name: 'SLV Silver ETF üÜï', annual: 137, dd: -10.69, winRate: 85.71, pf: 5.41, years: 1.0, badge: 'ETF', rdd: 12.82, updated: 'NEW DATA! 2025-2026 performance reflects AI/semiconductor demand.' }
        };

        // UPDATED TIER CONFIGURATIONS
        const tiers = {
            STARTER: {
                name: 'STARTER',
                price: '$60/mo',
                description: 'Perfect for beginners. Single-bot simplicity.',
                variants: {
                    conservative: { name: 'Conservative', allocation: { 'LTC_W_SHORT': 100 }, desc: 'Safest - 3 year proven LTC w/ Short.' },
                    moderate: { name: 'Moderate ‚≠ê', allocation: { 'HYPE_W_SHORT': 100 }, desc: 'Best performer - HYPE w/ Short 578%/yr!' },
                    aggressive: { name: 'Aggressive', allocation: { 'CRV_W_SHORT': 100 }, desc: 'All-in CRV - 217%/yr, watch DD.' }
                }
            },
            DUO: {
                name: 'DUO',
                price: '$119/mo',
                description: 'Two-bot power plays.',
                variants: {
                    conservative: { name: 'Conservative', allocation: { 'LTC_W_SHORT': 60, 'HYPE_W_SHORT': 40 }, desc: 'Safety first - LTC heavy.' },
                    moderate: { name: 'Moderate', allocation: { 'HYPE_W_SHORT': 65, 'LTC_W_SHORT': 35 }, desc: 'Balanced performance.' },
                    aggressive: { name: 'Aggressive', allocation: { 'HYPE_W_SHORT': 50, 'PUMP_MAX_PAIN': 50 }, desc: 'High returns + amazing DD' }
                }
            },
            TRIO: {
                name: 'TRIO',
                price: '$149/mo',
                description: '3-bot sweet spot.',
                variants: {
                    conservative: { name: 'Conservative', allocation: { 'HYPE_W_SHORT': 50, 'LTC_W_SHORT': 30, 'SLV': 20 }, desc: 'Proven + diversified with SLV.' },
                    moderate: { name: 'Moderate ‚≠ê', allocation: { 'HYPE_W_SHORT': 50, 'LTC_W_SHORT': 30, 'PUMP_MAX_PAIN': 20 }, desc: 'Balanced with PUMP Max-Pain' },
                    aggressive: { name: 'Aggressive', allocation: { 'HYPE_W_SHORT': 40, 'PUMP_MAX_PAIN': 35, 'LTC_W_SHORT': 25 }, desc: 'High returns, low DD' }
                }
            },
            QUAD: {
                name: 'QUAD',
                price: '$189/mo',
                description: '4-bot portfolios.',
                variants: {
                    conservative: { name: 'Conservative', allocation: { 'HYPE_W_SHORT': 40, 'LTC_W_SHORT': 30, 'SLV': 20, 'CRV_W_SHORT': 10 }, desc: 'Maximum diversification.' },
                    moderate: { name: 'Moderate', allocation: { 'HYPE_W_SHORT': 35, 'LTC_W_SHORT': 30, 'PUMP_MAX_PAIN': 20, 'CRV_W_SHORT': 15 }, desc: 'Balanced high-performers.' },
                    aggressive: { name: 'Aggressive', allocation: { 'HYPE_W_SHORT': 30, 'PUMP_W_SHORT': 25, 'LTC_W_SHORT': 25, 'PUMP_MAX_PAIN': 20 }, desc: 'PUMP strategies at 45%!' }
                }
            },
            GOD: {
                name: 'GOD MODE',
                price: '$219/mo',
                description: '5-bot maximum diversification.',
                variants: {
                    conservative: { name: 'Conservative', allocation: { 'HYPE_W_SHORT': 30, 'LTC_W_SHORT': 25, 'SLV': 20, 'CRV_W_SHORT': 15, 'HYPE_LONG': 10 }, desc: 'Full crypto + ETF mix.' },
                    moderate: { name: 'Moderate', allocation: { 'HYPE_W_SHORT': 30, 'LTC_W_SHORT': 25, 'PUMP_MAX_PAIN': 20, 'CRV_W_SHORT': 15, 'SLV': 10 }, desc: 'Balanced everything.' },
                    aggressive: { name: 'Aggressive', allocation: { 'HYPE_W_SHORT': 25, 'PUMP_W_SHORT': 25, 'PUMP_MAX_PAIN': 20, 'LTC_W_SHORT': 20, 'CRV_W_SHORT': 10 }, desc: 'Maximum PUMP exposure!' }
                }
            },
            ELITE: {
                name: 'ELITE üèÜ',
                price: 'Custom',
                description: 'ULTIMATE performance portfolios.',
                variants: {
                    'safest-proven': { name: 'Safest Proven ‚úÖ', allocation: { 'LTC_W_SHORT': 60, 'HYPE_W_SHORT': 40 }, desc: '3yr proven, 150-250% annual, safe DD' },
                    'balanced-power': { name: 'Balanced Power', allocation: { 'HYPE_W_SHORT': 50, 'LTC_W_SHORT': 30, 'CRV_W_SHORT': 20 }, desc: 'No PUMP, all proven strategies' },
                    'moderate-pump': { name: 'Moderate PUMP', allocation: { 'HYPE_W_SHORT': 40, 'LTC_W_SHORT': 30, 'PUMP_MAX_PAIN': 20, 'SLV': 10 }, desc: 'Conservative PUMP exposure' },
                    'aggressive-pump': { name: 'Aggressive PUMP üöÄ', allocation: { 'HYPE_W_SHORT': 30, 'PUMP_W_SHORT': 25, 'LTC_W_SHORT': 25, 'PUMP_MAX_PAIN': 20 }, desc: 'Maximum returns - SHORT BACKTEST WARNING!' },
                    'diversified-max': { name: 'Diversified Max', allocation: { 'HYPE_W_SHORT': 25, 'LTC_W_SHORT': 20, 'PUMP_MAX_PAIN': 20, 'SLV': 20, 'CRV_W_SHORT': 15 }, desc: 'All asset types balanced' }
                }
            }
        };

        // Quiz questions
        const questions = [
            {
                id: 1,
                text: "Have you traded crypto or used trading bots before?",
                answers: [
                    { text: "Yes, I'm experienced with crypto trading", value: "experienced", score: { risk: 2, complexity: 2 } },
                    { text: "Some experience, learning more", value: "intermediate", score: { risk: 1, complexity: 1 } },
                    { text: "No, I'm new to crypto", value: "beginner", score: { risk: 0, complexity: 0 } }
                ]
            },
            {
                id: 2,
                text: "How do you feel about strategies with SHORT BACKTESTS (6 months) but EXTREME returns?",
                answers: [
                    { text: "I'm comfortable - willing to accept variance", value: "pump-yes", score: { usePump: true, risk: 2 } },
                    { text: "Maybe a small allocation (10-20%)", value: "pump-small", score: { usePump: "small", risk: 1 } },
                    { text: "No thanks - I want proven strategies only", value: "pump-no", score: { usePump: false, risk: 0 } }
                ]
            },
            {
                id: 3,
                text: "What maximum drawdown can you handle emotionally?",
                condition: (answers) => answers.usePump !== false,
                answers: [
                    { text: "Under 15% - I want safety", value: "dd-low", score: { maxDD: 15, risk: 0 } },
                    { text: "15-25% - Moderate risk", value: "dd-med", score: { maxDD: 25, risk: 1 } },
                    { text: "25-35% - I can handle volatility", value: "dd-high", score: { maxDD: 35, risk: 2 } },
                    { text: "35%+ - Maximum returns matter most", value: "dd-vhigh", score: { maxDD: 50, risk: 3 } }
                ]
            },
            {
                id: 4,
                text: "Do you want to include Silver (SLV) for diversification?",
                answers: [
                    { text: "Yes - I want stock/ETF exposure", value: "slv-yes", score: { useSLV: true } },
                    { text: "No - Crypto only please", value: "slv-no", score: { useSLV: false } }
                ]
            },
            {
                id: 5,
                text: "How many bots do you want to manage?",
                answers: [
                    { text: "1-2 bots - Keep it simple", value: "simple", score: { complexity: 0, botCount: 2 } },
                    { text: "3-4 bots - Balanced", value: "balanced", score: { complexity: 1, botCount: 4 } },
                    { text: "5+ bots - Maximum diversification", value: "complex", score: { complexity: 2, botCount: 5 } }
                ]
            }
        ];

        let quizAnswers = {};
        let currentQuestion = 0;
        let useLeverage = false;

        function toggleLeverage() {
            useLeverage = document.getElementById('leverageToggle').checked;
            document.getElementById('leverageLabel').textContent = useLeverage ? 'On' : 'Off';
            document.getElementById('leverageWarning').style.display = useLeverage ? 'block' : 'none';
        }

        function startQuiz() {
            document.getElementById('modeSelection').classList.remove('show');
            document.getElementById('quizMode').classList.add('show');
            quizAnswers = {};
            currentQuestion = 0;
            showQuestion();
        }

        function showManualMode() {
            document.getElementById('modeSelection').classList.remove('show');
            document.getElementById('manualMode').classList.add('show');
        }

        function backToMenu() {
            document.querySelectorAll('.card').forEach(card => card.classList.remove('show'));
            document.getElementById('modeSelection').classList.add('show');
        }

        function showQuestion() {
            let question = questions[currentQuestion];
            
            // Check if this question should be shown based on previous answers
            if (question.condition && !question.condition(quizAnswers)) {
                currentQuestion++;
                if (currentQuestion < questions.length) {
                    showQuestion();
                } else {
                    showQuizResults();
                }
                return;
            }

            const progress = ((currentQuestion + 1) / questions.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';

            let html = `
                <div class="question">
                    <h3>Question ${currentQuestion + 1} of ${questions.length}</h3>
                    <h3>${question.text}</h3>
                    <div class="answers">
            `;

            question.answers.forEach((answer, index) => {
                html += `
                    <button class="answer-btn" onclick="selectAnswer(${index})">
                        ${answer.text}
                    </button>
                `;
            });

            html += `</div></div>`;
            document.getElementById('quizContent').innerHTML = html;
        }

        function selectAnswer(answerIndex) {
            const question = questions[currentQuestion];
            const answer = question.answers[answerIndex];
            
            // Store all score values
            Object.assign(quizAnswers, answer.score);

            currentQuestion++;

            if (currentQuestion < questions.length) {
                showQuestion();
            } else {
                showQuizResults();
            }
        }

        function showQuizResults() {
            // Calculate total risk score
            const riskScore = quizAnswers.risk || 0;
            const usePump = quizAnswers.usePump;
            const useSLV = quizAnswers.useSLV;
            const botCount = quizAnswers.botCount || 3;

            let recommendedTier, recommendedVariant;

            // Recommendation logic
            if (botCount <= 2) {
                recommendedTier = 'DUO';
                if (usePump === true) {
                    recommendedVariant = 'aggressive';
                } else if (riskScore >= 2) {
                    recommendedVariant = 'moderate';
                } else {
                    recommendedVariant = 'conservative';
                }
            } else if (botCount <= 4) {
                recommendedTier = riskScore <= 1 ? 'TRIO' : 'QUAD';
                if (usePump === true && riskScore >= 2) {
                    recommendedVariant = 'aggressive';
                } else if (usePump === "small" || riskScore === 1) {
                    recommendedVariant = 'moderate';
                } else {
                    recommendedVariant = 'conservative';
                }
            } else {
                recommendedTier = 'GOD';
                if (usePump === true && riskScore >= 2) {
                    recommendedVariant = 'aggressive';
                } else if (usePump === "small") {
                    recommendedVariant = 'moderate';
                } else {
                    recommendedVariant = 'conservative';
                }
            }

            displayResults(recommendedTier, recommendedVariant, true);
        }

        function calculateManual() {
            const tier = document.getElementById('tierSelect').value;
            const variant = document.getElementById('variantSelect').value;

            if (!tier || !variant) {
                alert('Please select both a tier and strategy!');
                return;
            }

            displayResults(tier, variant, false);
        }

        function updateVariants() {
            const tier = document.getElementById('tierSelect').value;
            const variantGroup = document.getElementById('variantGroup');
            const variantSelect = document.getElementById('variantSelect');

            if (!tier) {
                variantGroup.style.display = 'none';
                return;
            }

            variantGroup.style.display = 'block';
            variantSelect.innerHTML = '<option value="">Choose a strategy...</option>';

            const tierData = tiers[tier];
            Object.keys(tierData.variants).forEach(key => {
                const variant = tierData.variants[key];
                const option = document.createElement('option');
                option.value = key;
                option.textContent = `${variant.name} - ${variant.desc}`;
                variantSelect.appendChild(option);
            });
        }

        function displayResults(tierKey, variantKey, fromQuiz) {
            const tier = tiers[tierKey];
            const variant = tier.variants[variantKey];
            const allocation = variant.allocation;
            
            // Check if using leverage (only in manual mode)
            const applyLeverage = !fromQuiz && useLeverage;

            // Calculate weighted metrics
            let totalAnnual = 0;
            let worstDD = 0;
            let avgWinRate = 0;
            let avgPF = 0;
            let botCount = Object.keys(allocation).length;
            let hasWarning = false;
            let warnings = [];

            Object.keys(allocation).forEach(bot => {
                const pct = allocation[bot] / 100;
                let info = botData[bot];
                
                // Apply 2x leverage to SAFE strategies (base DD < 20%)
                // This keeps 2x DD under 40%, which is acceptable
                const safeFor2x = ['HYPE_W_SHORT', 'HYPE_LONG', 'HYPE_MAX_PAIN', 'LTC_W_SHORT', 'SLV', 'SOL_MAX_PAIN', 'SUI_MAX_PAIN'];
                // NOT safe: CRV_W_SHORT (47% DD), PUMP strategies (short backtests)
                
                if (applyLeverage && safeFor2x.includes(bot)) {
                    info = {
                        ...info,
                        name: info.name + ' @ 2x',
                        annual: info.annual * 2,
                        dd: info.dd * 2,
                        badge: '2X'
                    };
                }
                
                totalAnnual += info.annual * pct;
                worstDD = Math.min(worstDD, info.dd);
                avgWinRate += info.winRate * pct;
                avgPF += info.pf * pct;

                if (info.warning) {
                    hasWarning = true;
                    warnings.push({ bot: info.name, warning: info.warning });
                }
            });

            const rdd = (totalAnnual / Math.abs(worstDD)).toFixed(2);

            // Build results HTML
            let html = `
                <h2>Your Perfect Portfolio</h2>
                <p class="tier-name">${tier.name} - ${variant.name}</p>
                <p style="text-align: center; color: #a78bfa; margin-bottom: 30px;">${variant.desc}</p>
            `;

            // Warning banner if PUMP strategies included
            if (hasWarning) {
                html += `
                    <div style="background: rgba(245, 158, 11, 0.2); border: 2px solid #f59e0b; border-radius: 12px; padding: 20px; margin-bottom: 30px;">
                        <h3 style="color: #fbbf24; margin-bottom: 15px;">‚ö†Ô∏è SHORT BACKTEST WARNING</h3>
                `;
                warnings.forEach(w => {
                    html += `<p style="color: #fcd34d; margin-bottom: 10px;"><strong>${w.bot}:</strong> ${w.warning}</p>`;
                });
                html += `</div>`;
            }

            // Performance metrics
            html += `
                <div class="performance-grid">
                    <div class="metric-card">
                        <h4>Expected Annual Return</h4>
                        <p class="value">${totalAnnual.toFixed(0)}%</p>
                    </div>
                    <div class="metric-card">
                        <h4>Maximum Drawdown</h4>
                        <p class="value">${worstDD.toFixed(1)}%</p>
                    </div>
                    <div class="metric-card">
                        <h4>Return/DD Ratio</h4>
                        <p class="value">${rdd}</p>
                    </div>
                    <div class="metric-card">
                        <h4>Avg Win Rate</h4>
                        <p class="value">${avgWinRate.toFixed(1)}%</p>
                    </div>
                </div>
            `;

            // Allocation table
            html += `
                <h3 style="color: #ffd700; margin: 30px 0 20px 0;">Portfolio Allocation:</h3>
                <table class="allocation-table">
                    <thead>
                        <tr>
                            <th>Bot Strategy</th>
                            <th>Allocation</th>
                            <th>Annual Return</th>
                            <th>Max DD</th>
                            <th>Type</th>
                        </tr>
                    </thead>
                    <tbody>
            `;

            Object.keys(allocation).forEach(bot => {
                let info = botData[bot];
                const pct = allocation[bot];
                
                // Apply 2x leverage to display if enabled (same logic as calculations)
                const safeFor2x = ['HYPE_W_SHORT', 'HYPE_LONG', 'HYPE_MAX_PAIN', 'LTC_W_SHORT', 'SLV', 'SOL_MAX_PAIN', 'SUI_MAX_PAIN'];
                
                if (applyLeverage && safeFor2x.includes(bot)) {
                    info = {
                        ...info,
                        name: info.name + ' @ 2x',
                        annual: info.annual * 2,
                        dd: info.dd * 2,
                        badge: '2X'
                    };
                }
                
                const badgeClass = info.badge === 'CRYPTO' ? 'badge-crypto' : 
                                  info.badge === '2X' ? 'badge-2x' : 
                                  info.badge === 'STOCK' ? 'badge-stock' : 
                                  info.badge === 'ETF' ? 'badge-etf' :
                                  info.badge === 'WARNING' ? 'badge-warning' : 'badge-crypto';
                
                html += `
                    <tr>
                        <td>${info.name}</td>
                        <td><strong>${pct}%</strong></td>
                        <td>${info.annual.toFixed(0)}%/yr</td>
                        <td>${info.dd.toFixed(1)}%</td>
                        <td><span class="badge ${badgeClass}">${info.badge}</span></td>
                    </tr>
                `;
            });

            html += `
                    </tbody>
                </table>
            `;

            // Explanation
            if (fromQuiz) {
                html += `
                    <div class="explanation">
                        <h3>Why This Portfolio?</h3>
                        <p>Based on your answers, this portfolio matches your risk tolerance and experience level. The allocation is designed to balance returns with drawdown management while staying within your comfort zone.</p>
                    </div>
                `;
            } else if (applyLeverage) {
                html += `
                    <div class="explanation">
                        <h3>‚ö†Ô∏è 2x Leverage Applied</h3>
                        <p>Strategies with base DD < 20% have been calculated with 2x leverage. This DOUBLES both returns AND drawdowns. Safe for 2x: HYPE (all variants), LTC, SLV, SOL, SUI. NOT leveraged: CRV (too high DD), PUMP (short backtests).</p>
                    </div>
                `;
            }

            // Buttons
            html += `
                <div style="text-align: center; margin-top: 30px;">
                    ${fromQuiz ? '<button class="btn" onclick="startQuiz()">Take Quiz Again</button>' : '<button class="btn" onclick="showManualMode()">Try Another</button>'}
                    <button class="btn btn-secondary" onclick="backToMenu()" style="margin-left: 15px;">Back to Menu</button>
                </div>
            `;

            document.getElementById('results').innerHTML = html;
            document.getElementById('quizMode').classList.remove('show');
            document.getElementById('manualMode').classList.remove('show');
            document.getElementById('results').classList.add('show');
        }
    </script>
</body>
</html>
